<!DOCTYPE html>
<html lang="he">
<head>
  <meta charset="UTF-8">
  <title>Renuar Finder</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: linear-gradient(to bottom, #ffffff, #f2f6fa);
      color: #222;
      text-align: center;
    }
    header {
      background: #0d1b2a;
      padding: 15px;
    }
    header img {
      height: 60px;
    }
    h1 {
      margin: 10px 0;
      color: #0d1b2a;
    }
    input, button {
      padding: 8px;
      margin: 5px;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
    button {
      background: #003366;
      color: white;
      cursor: pointer;
    }
    button:hover {
      background: #00509e;
    }
    #results, #localList {
      margin: 20px auto;
      width: 80%;
      padding: 15px;
      border: 1px solid #ddd;
      background: #fff;
      border-radius: 6px;
      text-align: left;
    }
    #hostArea {
      display: none;
      margin: 20px auto;
      padding: 15px;
      width: 80%;
      border: 1px solid #bbb;
      background: #f9f9f9;
      border-radius: 6px;
    }
  </style>
</head>
<body>
  <!-- ===== شعار ===== -->
  <header>
    <img src="A9C545BF-4320-44BB-82C4-58F506EBD479.jpeg" alt="Renuar Logo">
  </header>

  <h1>🔎 Renuar Finder</h1>

  <!-- ===== البحث ===== -->
  <input id="searchInput" type="text" placeholder="הכנס מק״ט או שם פריט...">
  <br>
  <button id="btnLocal">חפש באתר שלי</button>
  <button id="btnRenuar">חפש ברנואר</button>
  <button id="btnHome">פתח אתר רנואר</button>
  <button id="btnClear">נקה</button>
  <p id="msg">כתיב מק״ט או שם ולחץ חיפוש</p>

  <div id="results"></div>

  <!-- ===== دخول هوست ===== -->
  <div id="loginBox">
    <h3>🔑 כניסת Host</h3>
    <input id="hostPass" type="password" placeholder="סיסמה (1234)">
    <button id="btnLogin">כניסה</button>
  </div>

  <!-- ===== منطقة هوست لإضافة منتجات ===== -->
  <div id="hostArea">
    <h3>➕ הוספת פריט</h3>
    <input id="sku" type="text" placeholder="מק״ט">
    <input id="name" type="text" placeholder="שם פריט">
    <input id="price" type="number" placeholder="מחיר (₪)">
    <input id="link" type="text" placeholder="קישור (רנואר)">
    <button id="btnAdd">הוסף</button>
    <div id="localList"></div>
  </div>

  <!-- ===== سكربت الأزرار ===== -->
  <script>
  const LS_KEY = 'renuarDB';
  const HOST_PASS = '1234';
  let DB = [];
  try { DB = JSON.parse(localStorage.getItem(LS_KEY) || '[]'); } catch { DB = []; }
  const $ = (sel, root=document) => root.querySelector(sel);
  const byId = id => document.getElementById(id) || null;
  function setText(id, txt){ const el=byId(id); if(el) el.textContent=txt; }
  function normalize(str){ return (str||'').trim().toLowerCase(); }
  function renUrl(q){ return 'https://www.renuar.co.il/catalogsearch/result/?q='+encodeURIComponent(q); }
  function renderList(items){
    const cont = byId('results')||byId('localList');
    if(!cont) return;
    if(!items.length){ cont.innerHTML='אין תוצאות.'; return; }
    cont.innerHTML = items.map(p=>`<p><b>${p.name}</b> (SKU: ${p.sku}) — ₪${p.price} 
      ${p.link?<a href="${p.link}" target="_blank">קישור</a>:''}</p>`).join('');
  }
  function readQuery(){ return normalize(byId('searchInput').value); }
  function searchLocal(){
    const q=readQuery(); if(!q) return setText('msg','נא להזין מק״ט או שם');
    const hits=DB.filter(p=>p.sku.toLowerCase().includes(q)||normalize(p.name).includes(q));
    renderList(hits); setText('msg', hits.length?'נמצא':'לא נמצאה תוצאה');
  }
  function searchRenuar(){ const q=byId('searchInput').value.trim(); if(!q) return; window.open(renUrl(q),'_blank'); }
  function openRenuar(){ window.open('https://www.renuar.co.il/home','_blank'); }
  let isHost=false;
  function hostLogin(){ if(byId('hostPass').value===HOST_PASS){isHost=true; byId('hostArea').style.display='block'; byId('loginBox').style.display='none';}else alert('סיסמה לא נכונה'); }
  function addItem(){
    if(!isHost) return alert('רק Host יכול להוסיף');
    const sku=byId('sku').value.trim(), name=byId('name').value.trim(), price=byId('price').value.trim(), link=byId('link').value.trim();
    if(!sku||!name||!price) return alert('מלא את כל השדות');
    DB.push({sku,name,price,link}); localStorage.setItem(LS_KEY,JSON.stringify(DB));
    ['sku','name','price','link'].forEach(id=>byId(id).value=''); renderList(DB);
  }
  function clearAll(){ byId('searchInput').value=''; byId('results').innerHTML=''; setText('msg','נמחק'); }
  function safeBind(id,fn){ const el=byId(id); if(el) el.addEventListener('click',fn); }
  document.addEventListener('DOMContentLoaded',()=>{
    safeBind('btnLocal',searchLocal);
    safeBind('btnRenuar',searchRenuar);
    safeBind('btnHome',openRenuar);
    safeBind('btnClear',clearAll);
    safeBind('btnLogin',hostLogin);
    safeBind('btnAdd',addItem);
    renderList(DB);
  });
  </script>
</body>
</html>
